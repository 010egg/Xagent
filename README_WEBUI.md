# Claude WebUI - Manus Style

ä¸€ä¸ªç°ä»£åŒ–çš„ Claude Code SDK WebUI ç•Œé¢ï¼Œé‡‡ç”¨ Manus é£æ ¼è®¾è®¡ã€‚

## åŠŸèƒ½ç‰¹æ€§

âœ¨ **æ ¸å¿ƒåŠŸèƒ½**
- ğŸ¨ Manus é£æ ¼çš„ç°ä»£åŒ– UI è®¾è®¡
- ğŸ’¬ å®æ—¶æµå¼å¯¹è¯
- ğŸ”„ æŒç»­å¯¹è¯è®°å¿†ï¼ˆClaude è®°ä½ä¸Šä¸‹æ–‡ï¼‰
- ğŸ› ï¸ å·¥å…·ä½¿ç”¨å¯è§†åŒ–
- ğŸ’­ æ€è€ƒè¿‡ç¨‹æ˜¾ç¤º
- ğŸ“Š ä¼šè¯ç»Ÿè®¡ä¿¡æ¯ï¼ˆæˆæœ¬ã€è€—æ—¶ã€è½®æ•°ï¼‰
- ğŸ”Œ WebSocket å®æ—¶é€šä¿¡

## é¡¹ç›®ç»“æ„

```
Xagent/
â”œâ”€â”€ webui_server.py          # FastAPI åç«¯æœåŠ¡å™¨
â”œâ”€â”€ static/
â”‚   â”œâ”€â”€ index.html           # ä¸»é¡µé¢
â”‚   â”œâ”€â”€ styles.css           # Manus é£æ ¼æ ·å¼
â”‚   â””â”€â”€ app.js              # å‰ç«¯äº¤äº’é€»è¾‘
â”œâ”€â”€ claude_client_demo.py    # ClaudeSDKClient å‘½ä»¤è¡Œ demo
â””â”€â”€ venv/                    # Python è™šæ‹Ÿç¯å¢ƒ
```

## å®‰è£…ä¾èµ–

å·²å®‰è£…çš„ä¾èµ–ï¼š
- `claude-agent-sdk` - Claude Code SDK
- `fastapi` - Web æ¡†æ¶
- `uvicorn` - ASGI æœåŠ¡å™¨
- `websockets` - WebSocket æ”¯æŒ

## è¿è¡Œ WebUI

### 1. å¯åŠ¨æœåŠ¡å™¨

```bash
cd /Users/xionghaoqiang/Xagent
source venv/bin/activate
python webui_server.py
```

### 2. è®¿é—®ç•Œé¢

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š
```
http://localhost:8000
```

### 3. å¼€å§‹å¯¹è¯

åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥æ¶ˆæ¯ï¼ŒæŒ‰ Enter æˆ–ç‚¹å‡»å‘é€æŒ‰é’®å³å¯å¼€å§‹ä¸ Claude å¯¹è¯ã€‚

## UI åŠŸèƒ½è¯´æ˜

### ä¾§è¾¹æ 
- **New Chat** - æ¸…ç©ºå½“å‰å¯¹è¯ï¼Œå¼€å§‹æ–°çš„èŠå¤©
- **Session Info** - æ˜¾ç¤ºä¼šè¯çŠ¶æ€ã€IDã€è½®æ•°å’Œæˆæœ¬
- **Status** - è¿æ¥çŠ¶æ€æŒ‡ç¤ºå™¨

### èŠå¤©åŒºåŸŸ
- **æ¶ˆæ¯æ˜¾ç¤º** - ç”¨æˆ·å’Œ Claude çš„å¯¹è¯æ¶ˆæ¯
- **å·¥å…·ä½¿ç”¨** - æ˜¾ç¤º Claude ä½¿ç”¨çš„å·¥å…·ï¼ˆReadã€Writeã€Bash ç­‰ï¼‰
- **æ€è€ƒè¿‡ç¨‹** - æ˜¾ç¤º Claude çš„æ€è€ƒè¿‡ç¨‹ï¼ˆå¦‚æœå¯ç”¨ï¼‰
- **ç»Ÿè®¡ä¿¡æ¯** - æ¯æ¬¡å“åº”åæ˜¾ç¤ºè€—æ—¶å’Œæˆæœ¬

### è¾“å…¥åŒºåŸŸ
- æ”¯æŒå¤šè¡Œè¾“å…¥ï¼ˆShift + Enter æ¢è¡Œï¼‰
- Enter å‘é€æ¶ˆæ¯
- è‡ªåŠ¨è°ƒæ•´é«˜åº¦ï¼ˆæœ€å¤§ 200pxï¼‰

## æŠ€æœ¯æ ˆ

### åç«¯
- **FastAPI** - ç°ä»£åŒ–çš„ Python Web æ¡†æ¶
- **WebSocket** - å®æ—¶åŒå‘é€šä¿¡
- **Claude Agent SDK** - Claude Code å®˜æ–¹ SDK

### å‰ç«¯
- **åŸç”Ÿ JavaScript** - æ— æ¡†æ¶ï¼Œè½»é‡é«˜æ•ˆ
- **WebSocket API** - å®æ—¶é€šä¿¡
- **CSS Variables** - ä¸»é¢˜ç®¡ç†
- **Flexbox/Grid** - å“åº”å¼å¸ƒå±€

## é…ç½®é€‰é¡¹

ç¼–è¾‘ `webui_server.py` ä¸­çš„é…ç½®ï¼š

```python
options = ClaudeAgentOptions(
    allowed_tools=["Read", "Write", "Edit", "Bash", "Glob", "Grep"],
    permission_mode="acceptEdits",  # è‡ªåŠ¨æ‰¹å‡†ç¼–è¾‘
    cwd="/Users/xionghaoqiang/Xagent"  # å·¥ä½œç›®å½•
)
```

### å¯é…ç½®é¡¹

- `allowed_tools` - å…è®¸ä½¿ç”¨çš„å·¥å…·åˆ—è¡¨
- `permission_mode` - æƒé™æ¨¡å¼
  - `"default"` - é»˜è®¤æç¤º
  - `"acceptEdits"` - è‡ªåŠ¨æ‰¹å‡†ç¼–è¾‘
  - `"bypassPermissions"` - ç»•è¿‡æ‰€æœ‰æƒé™æ£€æŸ¥
- `cwd` - Claude çš„å·¥ä½œç›®å½•
- `model` - ä½¿ç”¨çš„æ¨¡å‹ï¼ˆsonnet/opus/haikuï¼‰

## API ç«¯ç‚¹

### WebSocket
- **è·¯å¾„**: `/ws`
- **åè®®**: WebSocket
- **æ¶ˆæ¯æ ¼å¼**: JSON

#### å‘é€æ¶ˆæ¯æ ¼å¼
```json
{
  "type": "message",
  "content": "ä½ çš„æ¶ˆæ¯å†…å®¹"
}
```

#### æ¥æ”¶æ¶ˆæ¯ç±»å‹
- `user_message` - ç”¨æˆ·æ¶ˆæ¯
- `assistant_text` - Claude çš„æ–‡æœ¬å›å¤
- `thinking` - Claude çš„æ€è€ƒè¿‡ç¨‹
- `tool_use` - å·¥å…·ä½¿ç”¨ä¿¡æ¯
- `tool_result` - å·¥å…·æ‰§è¡Œç»“æœ
- `result` - å®Œæˆä¿¡æ¯å’Œç»Ÿè®¡
- `error` - é”™è¯¯æ¶ˆæ¯

## æ ·å¼è‡ªå®šä¹‰

ç¼–è¾‘ `static/styles.css` ä¸­çš„ CSS å˜é‡ï¼š

```css
:root {
    --primary-color: #10a37f;      /* ä¸»è‰²è°ƒ */
    --bg-primary: #0f0f0f;         /* ä¸»èƒŒæ™¯è‰² */
    --bg-secondary: #1a1a1a;       /* æ¬¡è¦èƒŒæ™¯è‰² */
    --text-primary: #ececf1;       /* ä¸»æ–‡æœ¬è‰² */
    /* ... æ›´å¤šå˜é‡ */
}
```

## æ•…éšœæ’é™¤

### ç«¯å£è¢«å ç”¨
```bash
# æ€æ‰å ç”¨ 8000 ç«¯å£çš„è¿›ç¨‹
lsof -ti:8000 | xargs kill -9
```

### WebSocket è¿æ¥å¤±è´¥
- æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦æ­£å¸¸è¿è¡Œ
- æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
- æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯

### Claude SDK é”™è¯¯
- ç¡®ä¿ `claude-agent-sdk` å·²æ­£ç¡®å®‰è£…
- æ£€æŸ¥ API å¯†é’¥é…ç½®ï¼ˆå¦‚æœéœ€è¦ï¼‰
- æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—

## ç‰¹æ€§å±•ç¤º

### æŒç»­å¯¹è¯
Claude ä¼šè®°ä½æ•´ä¸ªä¼šè¯çš„ä¸Šä¸‹æ–‡ï¼š
```
ç”¨æˆ·: åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ test.txt
Claude: [åˆ›å»ºæ–‡ä»¶]

ç”¨æˆ·: åœ¨åˆšæ‰é‚£ä¸ªæ–‡ä»¶é‡Œå†™å…¥ "Hello"
Claude: [è®°ä½æ˜¯ test.txtï¼Œè¿›è¡Œå†™å…¥]
```

### å·¥å…·å¯è§†åŒ–
å®æ—¶æ˜¾ç¤º Claude ä½¿ç”¨çš„å·¥å…·ï¼š
- ğŸ“ Write - åˆ›å»ºæ–‡ä»¶
- ğŸ“– Read - è¯»å–æ–‡ä»¶
- âœï¸ Edit - ç¼–è¾‘æ–‡ä»¶
- ğŸ”§ Bash - æ‰§è¡Œå‘½ä»¤
- ğŸ” Glob/Grep - æœç´¢æ–‡ä»¶

### æˆæœ¬è¿½è¸ª
è‡ªåŠ¨è®¡ç®—å’Œæ˜¾ç¤ºæ¯æ¬¡å¯¹è¯çš„æˆæœ¬ï¼š
- Token ä½¿ç”¨é‡
- API è°ƒç”¨æ—¶é—´
- æ€»æˆæœ¬ï¼ˆUSDï¼‰

## å¼€å‘è¯´æ˜

### æ·»åŠ æ–°åŠŸèƒ½

1. **åç«¯**: åœ¨ `webui_server.py` ä¸­ä¿®æ”¹ WebSocket å¤„ç†é€»è¾‘
2. **å‰ç«¯**: åœ¨ `static/app.js` ä¸­æ·»åŠ å¤„ç†å‡½æ•°
3. **æ ·å¼**: åœ¨ `static/styles.css` ä¸­æ·»åŠ æ ·å¼

### è°ƒè¯•æ¨¡å¼

å¯ç”¨è°ƒè¯•æ—¥å¿—ï¼š
```python
logging.basicConfig(level=logging.DEBUG)
```

## è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº Claude Code SDK æ„å»ºã€‚

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·æŸ¥é˜… Claude Code å®˜æ–¹æ–‡æ¡£ï¼š
- https://docs.anthropic.com/claude/docs
